# Story 1.6: Combat Character Selection & Home Screen Display

**Epic:** 1 - Foundation & Core Loop Setup
**Story Points:** 8
**Status:** ⏳ Pending

## User Story

**As a** User,
**I want** to select either "Sean" or "Mary" as my Combat Character and see my generated Home Avatar, progress rings, quest cartridge, tab bar, and fitness stats on the Home Screen,
**so that** the main application hub is functional and personalized according to the UI spec.

## Acceptance Criteria

1. [ ] User is prompted to select either "Sean" or "Mary" after avatar generation
2. [ ] The selection is saved to the user's profile/state
3. [ ] The Home Screen UI is implemented following the Game Boy aesthetic (NFR6), displaying content within the virtual LCD area using the DMG palette, and stats on the shell area using the Hardware palette
4. [ ] The user's generated Home Avatar is displayed prominently (top-center) within the virtual screen
5. [ ] **Dual Progress Rings**, a **Momentum/Streak Bar**, and the **"Quest Cartridge" button** are displayed below the avatar
6. [ ] The **bottom Tab Bar** (Home, Battle, Profile, Settings) is displayed and functional (navigates to placeholder screens)
7. [ ] Key fitness stats (Steps, Calories, Workout Duration) are displayed on the **shell area** below the virtual screen
8. [ ] Combat Character stats are accessible via the Profile tab

## Implementation

### Combat Character Selection Screen

**File:** `apps/mobile-shell/src/screens/onboarding/CharacterSelectionScreen.tsx`

- Show Sean and Mary character sprites
- Display character stats/description
- Select and confirm choice
- Save to `user_profiles.combat_character`

### Home Screen Layout

**File:** `apps/mobile-shell/src/screens/HomeScreen.tsx`

**Virtual LCD Area (DMG Palette):**
```
┌─────────────────────────┐
│   [Home Avatar Image]   │  ← AI-generated avatar
│      Stage 1 Badge      │
├─────────────────────────┤
│  ◯───────◯  Daily Ring  │  ← Progress rings
│  ◯───────◯  Weekly Ring │
├─────────────────────────┤
│ ▓▓▓▓▓░░░░░ Streak: 3    │  ← Momentum bar
├─────────────────────────┤
│  [Quest Cartridge] →    │  ← Battle button
└─────────────────────────┘
```

**Shell Area (Hardware Palette):**
```
Steps: 7,234 / 10,000
Calories: 342 / 500
Workout: 25 / 30 min
```

**Tab Bar:**
- Home (active)
- Battle
- Profile
- Settings

### Components to Create

1. **HomeAvatar** - Displays generated avatar with evolution badge
2. **ProgressRing** - Circular progress indicator
3. **StreakBar** - Linear progress with flame icon
4. **QuestCartridge** - Retro cartridge-style button
5. **StatsDisplay** - Fitness metrics in shell area
6. **TabBar** - Bottom navigation

### Data Flow

```typescript
const HomeScreen = () => {
  const { user } = useAuthStore();
  const { dailySteps, dailyCalories } = useHealthStore();
  const { avatar_url, evolution_stage } = useProfile(user?.id);

  return (
    <GameBoyShell>
      <VirtualLCD>
        <HomeAvatar src={avatar_url} stage={evolution_stage} />
        <ProgressRings daily={dailySteps} weekly={weeklySteps} />
        <StreakBar streak={currentStreak} />
        <QuestCartridge onPress={navigateToBattle} />
      </VirtualLCD>
      <ShellArea>
        <StatsDisplay
          steps={dailySteps}
          calories={dailyCalories}
          workoutMinutes={workoutMinutes}
        />
        <TabBar activeTab="home" />
      </ShellArea>
    </GameBoyShell>
  );
};
```

## UI Specifications

### DMG Color Palette
- Dark: `#0f380f`
- Medium Dark: `#306230`
- Medium Light: `#8bac0f`
- Light: `#9bbc0f`

### Hardware Color Palette
- Shell Gray: `#8e8b8c`
- Button Red: `#a4161a`
- Screen Bezel: `#5a5353`

### Fonts
- Primary: "Press Start 2P" or "VT323"
- Fallback: Monospace

## Dependencies

- Stories 1.2, 1.4, 1.5 must be complete
- React Navigation (Tab Navigator)
- SVG or Skia for progress rings
- Health data from Story 1.3 (or mock data)

## Next Story

**Story 1.7:** WebView Bridge & Basic Combat Scene Setup
