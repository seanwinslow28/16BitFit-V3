#!/bin/bash

# This file contains environment variables that are sourced by Xcode build phases

# Set the correct Node path for the monorepo structure
# Node binary should be found in system PATH or use nvm
export NODE_BINARY=$(command -v node)

# Ensure we're using the correct node_modules locations
# In a monorepo with hoisted dependencies, most modules are in root
export PROJECT_ROOT="${PROJECT_DIR}/.."
export WORKSPACE_ROOT="${PROJECT_DIR}/../../.."

# Add both local and root node_modules to NODE_PATH
export NODE_PATH="${WORKSPACE_ROOT}/node_modules:${PROJECT_ROOT}/node_modules:${NODE_PATH}"

# Print debug information (comment out in production)
echo "NODE_BINARY: $NODE_BINARY"
echo "PROJECT_ROOT: $PROJECT_ROOT"
echo "WORKSPACE_ROOT: $WORKSPACE_ROOT"
echo "NODE_PATH: $NODE_PATH"